/* *  CCTexture2DExt.mm *  SMYS * *  Created by jhzheng on 12-3-30. *  Copyright 2012 __MyCompanyName__. All rights reserved. * */#include "CCTexture2DExt.h"#include "NDTextureMonitor.h"@implementation CCTexture2D (MemoryMonitor)- (NSUInteger) GetPixelMemory{	unsigned int nSize	= self.pixelsWide * self.pixelsHigh;		switch (self.pixelFormat) {		case kCCTexture2DPixelFormat_RGBA8888:		nSize	*= 4;			break;		case kCCTexture2DPixelFormat_RGB565:		case kCCTexture2DPixelFormat_AI88:		case kCCTexture2DPixelFormat_RGBA4444:		case kCCTexture2DPixelFormat_RGB5A1:			nSize	*= 2;            break;		case kCCTexture2DPixelFormat_PVRTC4:			nSize	*= 2;            break;		case kCCTexture2DPixelFormat_PVRTC2:			nSize	/= 4;            break;        case kCCTexture2DPixelFormat_RGBA8:            nSize = nSize + 1024;            break;		default:			break;	}		return nSize;}- (void) OnLoadImageBegin{	TextureMonitorObj.BeforeTextureAdd();}- (void) OnLoadImageEnd{	unsigned int nSize = [self GetPixelMemory];		if ( 0 == nSize)	{		return;	}	TextureMonitorObj.TextureAdd(nSize);}- (void) OnUnLoadImageBegin{	unsigned int nSize = [self GetPixelMemory];		if ( 0 == nSize)	{		return;	}		TextureMonitorObj.TextureDel(nSize);}- (void) OnUnLoadImageEnd{}@end
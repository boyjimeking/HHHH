-----------------------------------------------------描述: 玩家丹药网络消息处理及其逻辑--时间: 2012.4.13--作者: xxj---------------------------------------------------MsgUsePill = {}local p = MsgUsePill;function p.SendUsePill(petId,pillType,pillLevel,pillId)  LogInfo("p.SendUsePill[%d][%d][%d][%d]",petId,pillType,pillLevel,pillId);  local netdata = createNDTransData(NMSG_Type._MSG_USE_PILL);  if nil == netdata then	LogInfo("发送使用丹药消息失败,内存不够");	return false;  end  netdata:WriteInt(petId);  netdata:WriteByte(pillType);    netdata:WriteByte(pillLevel);   netdata:WriteInt(pillId);   SendMsg(netdata);  netdata:Free();  ShowLoadBar();  return true;endfunction p.ProcessUsePill(netdata)  LogInfo("p.ProcessUsePill");  CloseLoadBar();  if IsUIShow(NMAINSCENECHILDTAG.PlayerUIPill) then    PlayerUIPill.RefreshPillUi();  endendRegisterNetMsgHandler(NMSG_Type._MSG_USE_PILL, "p.ProcessUsePill", p.ProcessUsePill);